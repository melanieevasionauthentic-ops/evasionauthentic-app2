window.I18N={lang:'fr',dict:{},load:async function(lang){try{const res=await fetch(`locales/${lang}.json`);this.dict=await res.json();this.lang=lang;localStorage.setItem('ea_lang',lang);this.apply()}catch(e){console.warn('i18n load failed',e)}},t:function(path,f=''){const s=path.split('.');let c=this.dict;for(const x of s){c=(c||{})[x]}return (c==null?f:c)},apply:function(){document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.getAttribute('data-i18n');el.textContent=this.t(k,el.textContent)});document.querySelectorAll('[data-i18n-placeholder]').forEach(el=>{const k=el.getAttribute('data-i18n-placeholder');el.setAttribute('placeholder',this.t(k,el.getAttribute('placeholder')||''))});const t=document.getElementById('hero-title');if(t)t.textContent=this.t('hero.title',t.textContent);const s=document.getElementById('hero-sub');if(s)s.textContent=this.t('hero.subtitle',s.textContent);const c1=document.getElementById('cta-rt');if(c1)c1.textContent=this.t('hero.cta_rt',c1.textContent);const c2=document.getElementById('cta-ex');if(c2)c2.textContent=this.t('hero.cta_ex',c2.textContent)}};(function(){const url=new URL(window.location.href);const q=url.searchParams.get('lang');const saved=localStorage.getItem('ea_lang');const g=(navigator.language||'fr').slice(0,2);const lang=q||saved||(['fr','en','es','de'].includes(g)?g:'fr');const sel=document.getElementById('lang-switch');if(sel){sel.value=lang;sel.addEventListener('change',e=>I18N.load(e.target.value))}window.I18N.load(lang)})();